webpackJsonp([0],{Kx17:function(module,__webpack_exports__,__webpack_require__){"use strict";var __WEBPACK_IMPORTED_MODULE_0__tools_Search_vue__=__webpack_require__("MQRD"),__WEBPACK_IMPORTED_MODULE_1__subpages_StudentDetail_vue__=__webpack_require__("kOA/");__webpack_exports__.a={data:function(){return{allData:function(){for(var e=[],t=0;t<100;t++)e.push({name:"王小虎"+t,parentName:"王爸爸",parentContact:"13888888888",school:"天府校区",class:[{className:"领袖口才2017期"+t,finishPercnet:Math.floor(16*Math.random())+"/16"},{className:"形象气质2017期",finishPercnet:Math.floor(16*Math.random())+"/16"}],restClass:Math.floor(96*Math.random())+" / 96",index:t});return e}(),searchData:[],currentPage:1,count:100,dialogVisible:!1,detailIndex:0}},mounted:function(){},methods:{handleSizeChange:function(e){console.log("每页"+e+"条")},handleCurrentChange:function(e){this.currentPage=e},calClass:function(e){var t="";return e.forEach(function(e){t+=e.className+"　\n"}),t},calPercent:function calPercent(str){return Math.floor(100*eval(str))},calProgressBarStatus:function(e){var t=Number(e.split("/")[1])-Number(e.split("/")[0]);return 0==t?"success":t<5?"exception":void 0},calDeadLine:function(e){var t=this,a="暂无";return e.forEach(function(e){"exception"==t.calProgressBarStatus(e.finishPercnet)&&(a="是")}),a},search:function(e){this.searchData=this.allData.filter(function(t){return-1!==t.name.indexOf(e)}),this.count=this.searchData.length,this.nowData=this.searchData.slice(10*this.currentPage-10,10*this.currentPage)},handleSortChange:function(e){var t=this;console.log(e),"restClass"==e.prop&&("descending"==e.order?this.allData=this.allData.sort(function(e,t){var a=Number(e.restClass.split("/")[0]),s=Number(t.restClass.split("/")[0]);return a>s?1:a==s?0:-1}):"ascending"==e.order&&(this.allData=this.allData.sort(function(e,t){var a=Number(e.restClass.split("/")[0]),s=Number(t.restClass.split("/")[0]);return a<s?1:a==s?0:-1}))),"haveDeadline"==e.prop&&("descending"==e.order?this.allData=this.allData.sort(function(e,a){var s=t.calDeadLine(e.class),l=t.calDeadLine(a.class);return"是"==s?1:s==l?0:-1}):"ascending"==e.order&&(this.allData=this.allData.sort(function(e,a){var s=t.calDeadLine(e.class),l=t.calDeadLine(a.class);return"暂无"==s?1:s==l?0:-1})))},showStudentDetail:function(e){this.dialogVisible=!0,this.detailIndex=e.index},closeDetail:function(){this.dialogVisible=!1}},computed:{nowData:function(){return this.allData.slice(10*this.currentPage-10,10*this.currentPage)}},components:{Search:__WEBPACK_IMPORTED_MODULE_0__tools_Search_vue__.a,StudentDetail:__WEBPACK_IMPORTED_MODULE_1__subpages_StudentDetail_vue__.a}}},MQRD:function(e,t,a){"use strict";var s={props:{placeText:{type:String,default:"请输入搜索内容"}},data:function(){return{criteria:""}},methods:{search:function(){this.$emit("search",this.criteria)}}},l={render:function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"search"},[a("el-input",{staticClass:"search-input",staticStyle:{"padding-bottom":"10px"},attrs:{placeholder:e.placeText},on:{change:e.search},model:{value:e.criteria,callback:function(t){e.criteria=t},expression:"criteria"}}),e._v(" "),a("el-button",{attrs:{type:"primary",icon:"el-icon-search"},on:{click:e.search}},[e._v("搜索")])],1)},staticRenderFns:[]};var r=a("VU/8")(s,l,!1,function(e){a("xvjC")},"data-v-6fb6ede0",null);t.a=r.exports},PeBG:function(e,t,a){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var s=a("Kx17"),l={render:function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"student-list"},[a("p",{staticClass:"text"},[e._v("学员列表")]),e._v(" "),a("search",{attrs:{"place-text":"请输入学生姓名"},on:{search:e.search}}),e._v(" "),a("el-table",{staticClass:"feedback-table",staticStyle:{width:"90%",margin:"0 auto"},attrs:{stripe:"",data:e.nowData,"max-height":"2000"},on:{"sort-change":e.handleSortChange}},[a("el-table-column",{attrs:{fixed:"left",type:"expand"},scopedSlots:e._u([{key:"default",fn:function(t){return[a("el-form",{staticClass:"demo-table-expand",attrs:{inline:""}},e._l(t.row.class,function(t,s){return a("el-form-item",{key:s,attrs:{label:t.className}},[a("el-progress",{staticClass:"class-progress",attrs:{"show-text":!1,"stroke-width":16,percentage:e.calPercent(t.finishPercnet),status:e.calProgressBarStatus(t.finishPercnet)}}),e._v(" "),a("span",{staticClass:"class-progress-text"},[e._v(e._s(t.finishPercnet))])],1)}))]}}])}),e._v(" "),a("el-table-column",{attrs:{prop:"name",align:"center",label:"学员姓名",width:"150"}}),e._v(" "),a("el-table-column",{attrs:{prop:"parentName",align:"center",label:"家长姓名",width:"120"}}),e._v(" "),a("el-table-column",{attrs:{prop:"parentContact",align:"center",label:"联系方式",width:"120"}}),e._v(" "),a("el-table-column",{attrs:{prop:"school",align:"center",label:"校区",width:"120"}}),e._v(" "),a("el-table-column",{attrs:{prop:"class",align:"center",label:"参加课程",width:"auto"},scopedSlots:e._u([{key:"default",fn:function(t){return[a("span",[e._v(e._s(e.calClass(t.row.class)))])]}}])}),e._v(" "),a("el-table-column",{attrs:{sortable:"custom",prop:"haveDeadline",align:"center",label:"有课程即将到期",width:"160"},scopedSlots:e._u([{key:"default",fn:function(t){return[a("el-tag",{attrs:{type:"是"===e.calDeadLine(t.row.class)?"danger":"success","close-transition":""}},[e._v(e._s(e.calDeadLine(t.row.class)))])]}}])}),e._v(" "),a("el-table-column",{attrs:{sortable:"custom",prop:"restClass",align:"center",label:"剩余/总充值课时",width:"160"}}),e._v(" "),a("el-table-column",{attrs:{fixed:"right",align:"center",label:"操作",width:"120"},scopedSlots:e._u([{key:"default",fn:function(t){return[a("el-button",{attrs:{type:"text",size:"small"},on:{click:function(a){e.showStudentDetail(t.row)}}},[e._v("\n          查看详情\n        ")])]}}])})],1),e._v(" "),a("div",{staticClass:"feed-back-pagination",staticStyle:{"text-align":"left","margin-top":"10px"}},[a("el-pagination",{ref:"paginat",attrs:{background:"","current-page":e.currentPage,"page-size":10,layout:"total, prev, pager, next",total:e.count},on:{"size-change":e.handleSizeChange,"current-change":e.handleCurrentChange}})],1),e._v(" "),a("student-detail",{attrs:{dialogVisible:e.dialogVisible,studentIndex:e.detailIndex},on:{close:e.closeDetail}})],1)},staticRenderFns:[]};var r=function(e){a("elhp")},n=a("VU/8")(s.a,l,!1,r,null,null);t.default=n.exports},elhp:function(e,t){},hszW:function(e,t){},"kOA/":function(e,t,a){"use strict";var s={props:{placeText:{type:String,default:"请输入搜索内容"},dialogVisible:{type:Boolean,default:!1},studentIndex:{type:Number,default:0}},data:function(){return{form:{studentName:"",parentName:"",parentContact:"",school:"天府校区",allClass:0,singleClass:0,restClass:32,classChoose:[],type:[],desc:""},rules:{studentName:[{required:!0,message:"请输入学生姓名",trigger:"blur"}],parentName:[{required:!0,message:"请输入家长称呼",trigger:"blur"}],parentContact:[{required:!0,message:"请输入家长联系方式",trigger:"blur"}],allClass:[],singleClass:[],restClass:[]},changeClassform:{className:"",hadClass:0,totalClass:0},classData:function(e){for(var t=[],a=1;a<=15;a++)t.push({key:a,label:"课程 "+a});return t}(),tableData:[{date:"2017-05-02",name:"领袖口才2017期",address:"无",tag:"到课"},{date:"2017-05-04",name:"形象气质2017期",address:"家人出门旅游",tag:"请假"},{date:"2017-05-01",name:"领袖口才2017期",address:"家长课后约谈",tag:"到课"},{date:"2017-05-03",name:"形象气质2017期",address:"参加学校考试",tag:"请假"},{date:"2018-05-03",name:"形象气质2018期",address:"无",tag:"待上"},{date:"2018-05-03",name:"形象气质2018期",address:"需要自带小板凳",tag:"待上"}],tableData1:[{date:"周一 17:00-18:00",className:"领袖口才2017期1班",progress:"5/16",desc:"天府校区-E教室-小宇老师"},{date:"周二 17:00-18:00",className:"形象气质2017期2班",progress:"7/16",desc:"天府校区-D教室-小花老师"},{date:"周六 17:00-18:00",className:"领袖口才2018期1班",progress:"14/16",desc:"天府校区-A教室-小萌老师"}],changeClassVisible:!1}},methods:{close:function(){console.log(11),this.$emit("close")},changeClass:function(e,t,a){var s=this;if(this.allClass-16*this.classChoose.length<0)return this.$message.error("您的剩余课时不够添加这些课程哦"),void a.forEach(function(e){s.classChoose.splice(s.classChoose.findIndex(function(t){return t==e}))},this);this.restClass=this.allClass-16*this.classChoose.length},filterTag:function(e,t){return t.tag===e},openClassChange:function(e){console.log(e),this.changeClassform.className=e.className,this.changeClassform.hadClass=Number(e.progress.split("/")[0]),this.changeClassform.totalClass=Number(e.progress.split("/")[1]),this.changeClassVisible=!0},submitChangeHadClass:function(){console.log("确定修改课时")},openConfirm:function(e,t){var a=this,s=void 0;console.log(t),1==e?s="本次操作将从学员剩余课时中扣除"+Number(t.progress.split("/")[1])+"课时，用以续开一期"+t.className+"课程，是否确认？":2==e&&(s="本次操作将停止该学员的"+t.className+"课程，剩余"+(Number(t.progress.split("/")[1])-Number(t.progress.split("/")[0]))+"课时将自动转入该学员剩余课时，是否确认？"),this.$confirm(s,"确认操作",{confirmButtonText:"确定",cancelButtonText:"取消",type:"info"}).then(function(){a.$message({type:"success",message:"操作成功!"})}).catch(function(){a.$message({type:"info",message:"已取消修改"})})},calClassType:function(e){switch(e){case"请假":return"danger";case"到课":return"success";case"待上":return"primary"}}}},l={render:function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"student-detail"},[a("el-dialog",{staticClass:"detail-dialog",attrs:{title:"学员详情 - 王小虎","before-close":e.close,"show-close":!1,visible:e.dialogVisible,width:"1100px"},on:{"update:visible":function(t){e.dialogVisible=t}}},[a("el-tabs",[a("el-tab-pane",{attrs:{label:"基本信息"}},[a("el-form",{ref:"form",staticClass:"detail-form",attrs:{rules:e.rules,model:e.form,"label-width":"120px"}},[a("el-form-item",{attrs:{label:"学员姓名",prop:"studentName"}},[a("el-input",{model:{value:e.form.studentName,callback:function(t){e.$set(e.form,"studentName",t)},expression:"form.studentName"}})],1),e._v(" "),a("el-form-item",{attrs:{label:"学员家长",prop:"parentName"}},[a("el-input",{model:{value:e.form.parentName,callback:function(t){e.$set(e.form,"parentName",t)},expression:"form.parentName"}})],1),e._v(" "),a("el-form-item",{attrs:{label:"家长联系方式",prop:"parentContact"}},[a("el-input",{model:{value:e.form.parentContact,callback:function(t){e.$set(e.form,"parentContact",t)},expression:"form.parentContact"}})],1),e._v(" "),a("el-form-item",{attrs:{label:"校区"}},[a("el-select",{attrs:{placeholder:"请选择校区"},model:{value:e.form.school,callback:function(t){e.$set(e.form,"school",t)},expression:"form.school"}},[a("el-option",{attrs:{label:"天府校区",value:"shanghai"}}),e._v(" "),a("el-option",{attrs:{label:"锦江校区",value:"beijing"}})],1)],1),e._v(" "),a("el-form-item",{attrs:{label:"剩余可用课时",prop:"allClass"}},[a("el-input-number",{attrs:{min:0,max:1e3,label:"描述文字"},model:{value:e.form.allClass,callback:function(t){e.$set(e.form,"allClass",t)},expression:"form.allClass"}})],1),e._v(" "),a("el-form-item",{attrs:{label:"单个课程课时",prop:"singleClass"}},[a("el-input-number",{attrs:{min:0,max:1e3,label:"描述文字"},model:{value:e.form.singleClass,callback:function(t){e.$set(e.form,"singleClass",t)},expression:"form.singleClass"}})],1),e._v(" "),a("el-form-item",{attrs:{label:"添加课程"}},[a("el-checkbox-group",{model:{value:e.form.type,callback:function(t){e.$set(e.form,"type",t)},expression:"form.type"}},[a("el-transfer",{attrs:{titles:["校区课程","已参加课程"],data:e.classData},on:{change:e.changeClass},model:{value:e.form.classChoose,callback:function(t){e.$set(e.form,"classChoose",t)},expression:"form.classChoose"}})],1)],1),e._v(" "),a("el-form-item",{attrs:{label:"添加后剩余课时",prop:"restClass"}},[a("p",{staticClass:"class-overplus"},[e._v(e._s(e.form.restClass))])]),e._v(" "),a("el-form-item",{attrs:{label:"其他备注"}},[a("el-input",{attrs:{type:"textarea"},model:{value:e.form.desc,callback:function(t){e.$set(e.form,"desc",t)},expression:"form.desc"}})],1),e._v(" "),a("el-form-item",[a("el-button",{attrs:{type:"primary"}},[e._v("修改信息")]),e._v(" "),a("el-button",{on:{click:e.close}},[e._v("关闭")])],1)],1)],1),e._v(" "),a("el-tab-pane",{attrs:{label:"课程情况"}},[a("div",{staticClass:"class-title"},[a("i",{staticClass:"el-icon-date"}),e._v(" "),a("span",[e._v("课程情况")])]),e._v(" "),a("el-table",{staticStyle:{width:"100%"},attrs:{data:e.tableData1}},[a("el-table-column",{attrs:{prop:"className",label:"课程名称",width:"180"}}),e._v(" "),a("el-table-column",{attrs:{prop:"date",label:"上课时间",width:"140"},scopedSlots:e._u([{key:"default",fn:function(t){return[a("span",{staticStyle:{"margin-left":"10px"}},[e._v(e._s(t.row.date))])]}}])}),e._v(" "),a("el-table-column",{attrs:{prop:"progress",label:"课程进度",width:"180"},scopedSlots:e._u([{key:"default",fn:function(t){return[a("el-progress",{attrs:{type:"circle",percentage:25,width:27,"show-text":!1}}),e._v(" "),a("span",{staticStyle:{"margin-left":"10px","font-size":"16px"}},[e._v(e._s(t.row.progress))])]}}])}),e._v(" "),a("el-table-column",{attrs:{prop:"desc",label:"备注"}}),e._v(" "),a("el-table-column",{attrs:{label:"操作"},scopedSlots:e._u([{key:"default",fn:function(t){return[a("el-button",{attrs:{size:"small",type:"primary"},on:{click:function(a){e.openClassChange(t.row)}}},[e._v("修改课时")]),e._v(" "),a("el-button",{attrs:{size:"small",type:"success"},on:{click:function(a){e.openConfirm(1,t.row)}}},[e._v("续课")]),e._v(" "),a("el-button",{attrs:{size:"small",type:"danger"},on:{click:function(a){e.openConfirm(2,t.row)}}},[e._v("停课")])]}}])})],1),e._v(" "),a("div",{staticClass:"class-title"},[a("i",{staticClass:"el-icon-date"}),e._v(" "),a("span",[e._v("上课记录")])]),e._v(" "),a("el-table",{staticStyle:{width:"100%"},attrs:{data:e.tableData,height:"300"}},[a("el-table-column",{attrs:{prop:"date",label:"上课时间",sortable:"",width:"180"},scopedSlots:e._u([{key:"default",fn:function(t){return[a("i",{staticClass:"el-icon-time"}),e._v(" "),a("span",{staticStyle:{"margin-left":"10px"}},[e._v(e._s(t.row.date))])]}}])}),e._v(" "),a("el-table-column",{attrs:{prop:"name",label:"课程名称",width:"280"}}),e._v(" "),a("el-table-column",{attrs:{prop:"address",label:"备注"}}),e._v(" "),a("el-table-column",{attrs:{prop:"tag",label:"出勤状态",width:"100",filters:[{text:"请假",value:"请假"},{text:"到课",value:"到课"},{text:"待上",value:"待上"}],"filter-method":e.filterTag,"filter-placement":"bottom-end"},scopedSlots:e._u([{key:"default",fn:function(t){return[a("el-tag",{attrs:{type:e.calClassType(t.row.tag),"close-transition":""}},[e._v(e._s(t.row.tag))])]}}])})],1)],1)],1),e._v(" "),a("el-dialog",{attrs:{width:"30%",title:"修改课时",visible:e.changeClassVisible,"append-to-body":""},on:{"update:visible":function(t){e.changeClassVisible=t}}},[a("el-form",{ref:"changeClass",attrs:{model:e.changeClassform,"label-width":"80px"}},[a("el-form-item",{attrs:{label:"学员姓名"}},[a("span",[e._v("王小虎")])]),e._v(" "),a("el-form-item",{attrs:{label:"课程名称"}},[a("span",[e._v(e._s(e.changeClassform.className))])]),e._v(" "),a("el-form-item",{attrs:{label:"已上课时"}},[a("el-input-number",{attrs:{min:1,max:e.changeClassform.totalClass,label:"已上课时"},model:{value:e.changeClassform.hadClass,callback:function(t){e.$set(e.changeClassform,"hadClass",t)},expression:"changeClassform.hadClass"}})],1),e._v(" "),a("el-form-item",{attrs:{label:"总课时"}},[a("span",[e._v(e._s(e.changeClassform.totalClass))])]),e._v(" "),a("el-form-item",[a("el-button",{attrs:{type:"primary"},on:{click:e.submitChangeHadClass}},[e._v("修改")]),e._v(" "),a("el-button",{on:{click:function(t){e.changeClassVisible=!1}}},[e._v("取消")])],1)],1)],1)],1)],1)},staticRenderFns:[]};var r=a("VU/8")(s,l,!1,function(e){a("hszW")},"data-v-2aba88df",null);t.a=r.exports},xvjC:function(e,t){}});
//# sourceMappingURL=0.712d192ab8e3006758c6.js.map